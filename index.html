<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="TITAN ANDROID [GOD MODE] - Script Bash de optimización extrema v21">
    <title>TITAN v21 [GOD MODE] - Android Optimizer</title>
    
    <!-- Preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        god: {
                            50: '#fffbeb',
                            100: '#fef3c7',
                            400: '#fbbf24',
                            500: '#f59e0b', /* Gold */
                            600: '#d97706',
                            900: '#78350f',
                            dark: '#020202',
                            panel: '#0a0a0a',
                        },
                        void: '#050505'
                    },
                    animation: {
                        'pulse-gold': 'pulse-gold 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'scanline': 'scanline 8s linear infinite',
                    },
                    keyframes: {
                        'pulse-gold': {
                            '0%, 100%': { opacity: '1', boxShadow: '0 0 10px #f59e0b' },
                            '50%': { opacity: '.8', boxShadow: '0 0 20px #fbbf24' },
                        },
                        'scanline': {
                            '0%': { transform: 'translateY(-100%)' },
                            '100%': { transform: 'translateY(100%)' }
                        }
                    }
                }
            }
        }
    </script>

    <style>
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #f59e0b; }

        pre { counter-reset: line; }
        code { counter-increment: line; }
        
        .glass {
            background: rgba(5, 5, 5, 0.9);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(245, 158, 11, 0.15); /* Gold Border */
        }

        .line-number::before {
            content: counter(line);
            display: inline-block;
            width: 3em;
            margin-right: 1.5em;
            text-align: right;
            color: #444;
            font-size: 0.8em;
        }

        /* Syntax Colors (God Mode Theme) */
        .syntax-comment { color: #525252; font-style: italic; }
        .syntax-string { color: #fbbf24; } /* Light Gold */
        .syntax-keyword { color: #ef4444; font-weight: bold; } /* Red for critical keywords */
        .syntax-function { color: #38bdf8; } /* Blue */
        .syntax-variable { color: #a855f7; } /* Purple */
        .syntax-cmd { color: #fff; font-weight: bold; text-shadow: 0 0 5px rgba(255,255,255,0.2); }
        
        ::selection { background: #f59e0b; color: black; }

        .crt::before {
            content: " ";
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            z-index: 2;
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
        }

        .modal { transition: opacity 0.2s ease; }
        body.modal-active { overflow: hidden !important; }
    </style>
</head>
<body class="bg-god-dark text-gray-300 antialiased min-h-screen flex flex-col overflow-hidden">

    <!-- Background Decoration -->
    <div class="fixed inset-0 z-0 pointer-events-none">
        <div class="absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-god-900/10 via-black to-black"></div>
        <div class="absolute top-0 w-full h-px bg-gradient-to-r from-transparent via-god-500/50 to-transparent"></div>
        <div class="absolute bottom-0 w-full h-px bg-gradient-to-r from-transparent via-god-500/50 to-transparent"></div>
    </div>

    <div class="relative z-10 flex flex-col h-screen max-w-7xl mx-auto p-4 lg:p-6 w-full">
        
        <!-- Header -->
        <header class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
            <div class="flex items-center gap-4">
                <div class="w-14 h-14 rounded bg-black border border-god-500/30 flex items-center justify-center shadow-[0_0_25px_rgba(245,158,11,0.2)]">
                    <i class="ph-fill ph-crown text-god-400 text-3xl"></i>
                </div>
                <div>
                    <h1 class="text-4xl font-extrabold tracking-tighter text-white font-mono uppercase">TITAN <span class="text-god-500 drop-shadow-[0_0_10px_rgba(245,158,11,0.5)]">v21</span></h1>
                    <div class="flex items-center gap-2 mt-1">
                        <span class="text-[10px] font-bold bg-god-500 text-black px-2 py-0.5 rounded-sm font-mono tracking-widest">GOD MODE</span>
                        <span class="text-[10px] text-gray-500 font-mono">KERNEL & NET BOOST</span>
                    </div>
                </div>
            </div>

            <div class="flex items-center gap-3 glass p-1.5 rounded border-gray-800 bg-black/50">
                <div class="hidden sm:flex flex-col items-end px-3 text-[10px] font-mono text-gray-400 leading-tight">
                    <span>STATUS: <span class="text-green-500">READY</span></span>
                    <span>TARGET: <span class="text-god-500">ANDROID 10+</span></span>
                </div>
                <div class="h-8 w-px bg-gray-800 hidden sm:block"></div>
                <button onclick="toggleModal()" class="flex items-center gap-2 px-4 py-2 text-xs font-bold bg-god-500/10 hover:bg-god-500/20 text-god-400 border border-god-500/30 transition-all hover:shadow-[0_0_15px_rgba(245,158,11,0.2)]">
                    <i class="ph-bold ph-terminal"></i> 
                    <span>Instalar</span>
                </button>
            </div>
        </header>

        <!-- Main Toolbar -->
        <div class="glass rounded-t-lg p-3 border-b border-gray-800 flex flex-col sm:flex-row gap-4 items-center justify-between bg-[#080808]">
            <!-- Search -->
            <div class="relative w-full sm:w-96 group">
                <i class="ph ph-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 group-focus-within:text-god-400 transition-colors"></i>
                <input type="text" id="searchInput" placeholder="Buscar tweak (ej: 'dns', 'compile')..." 
                    class="w-full bg-black border border-gray-800 text-sm font-mono pl-10 pr-12 py-2 focus:ring-1 focus:ring-god-500 focus:border-god-500 outline-none text-gray-300 placeholder-gray-700 transition-all">
                <span id="matchCount" class="absolute right-3 top-1/2 -translate-y-1/2 text-xs font-mono text-god-500 hidden">0</span>
            </div>

            <!-- Actions -->
            <div class="flex gap-3 w-full sm:w-auto">
                <button onclick="copyOneLiner()" class="flex-1 sm:flex-none flex items-center justify-center gap-2 px-6 py-2 bg-god-600 hover:bg-god-500 text-black font-bold font-mono text-sm transition-all shadow-[0_0_20px_rgba(245,158,11,0.3)] active:scale-95 hover:translate-y-[-1px]">
                    <i class="ph-bold ph-lightning-fill"></i> AUTO-RUN
                </button>
                <button onclick="copyToClipboard()" class="flex-1 sm:flex-none flex items-center justify-center gap-2 px-4 py-2 bg-[#151515] hover:bg-[#202020] text-gray-300 rounded font-mono font-medium text-sm transition-all border border-gray-800 active:scale-95">
                    <i class="ph-bold ph-code"></i> RAW
                </button>
            </div>
        </div>

        <!-- Code Editor Area -->
        <div class="flex-grow relative group rounded-b-lg overflow-hidden glass border-t-0 border-gray-800 shadow-2xl bg-black crt">
            <!-- File Info Badge -->
            <div class="absolute top-0 right-0 z-20 flex text-xs font-mono border-l border-b border-gray-800 rounded-bl bg-[#0a0a0a]">
                 <div class="text-god-500 px-4 py-1.5 font-bold tracking-wider flex items-center gap-2">
                    <div class="w-1.5 h-1.5 rounded-full bg-god-500 animate-pulse"></div>
                    titan_v21_god.sh
                 </div>
            </div>

            <div class="absolute inset-0 overflow-auto custom-scrollbar" id="codeContainer">
                <pre class="p-6 font-mono text-[13px] leading-6 tab-4 outline-none text-gray-300"><code id="codeBlock" class="block min-w-max"></code></pre>
            </div>
        </div>

        <footer class="mt-4 flex justify-between items-center text-[10px] text-gray-600 font-mono uppercase tracking-widest">
            <div class="flex items-center gap-2">
                <i class="ph-fill ph-warning-octagon text-god-600"></i>
                <span>USE AT YOUR OWN RISK</span>
            </div>
            <div class="flex gap-4">
                <span>LINES: <span id="loc" class="text-gray-400">0</span></span>
            </div>
        </footer>
    </div>

    <!-- Instructions Modal -->
    <div id="installModal" class="modal opacity-0 pointer-events-none fixed w-full h-full top-0 left-0 flex items-center justify-center z-50">
        <div class="modal-overlay absolute w-full h-full bg-black/90 backdrop-blur-sm" onclick="toggleModal()"></div>
        
        <div class="modal-container bg-[#080808] w-11/12 md:max-w-md mx-auto border border-god-500/20 shadow-[0_0_50px_rgba(245,158,11,0.1)] z-50 overflow-y-auto max-h-[90vh]">
            
            <div class="modal-content py-5 px-6 text-left">
                <!-- Title -->
                <div class="flex justify-between items-center pb-4 border-b border-gray-800">
                    <p class="text-lg font-bold text-god-500 font-mono tracking-tight flex items-center gap-2">
                        <i class="ph-fill ph-terminal-window"></i> TERMINAL INJECTOR
                    </p>
                    <div class="modal-close cursor-pointer z-50 text-gray-500 hover:text-white transition-colors" onclick="toggleModal()">
                        <i class="ph-bold ph-x"></i>
                    </div>
                </div>

                <!-- Body -->
                <div class="my-6 text-gray-300 text-sm font-mono space-y-5">
                    
                    <div class="bg-god-900/10 p-4 border border-god-500/20 relative overflow-hidden group">
                        <div class="absolute top-0 left-0 w-1 h-full bg-god-500"></div>
                        <p class="font-bold text-god-400 mb-2 text-xs uppercase tracking-widest">Comando Maestro</p>
                        <p class="text-[11px] text-gray-400 mb-3 leading-relaxed">
                            Copia y pega esto en Termux. Detecta automáticamente Root/ADB y desbloquea las funciones correspondientes.
                        </p>
                        <button onclick="copyOneLiner()" class="w-full py-2.5 bg-god-600 hover:bg-god-500 text-black font-bold text-xs flex items-center justify-center gap-2 transition-all shadow-lg shadow-god-900/20">
                            <i class="ph-bold ph-copy"></i> COPIAR INYECTOR
                        </button>
                    </div>

                    <div class="space-y-3">
                        <p class="font-bold text-gray-500 text-[10px] uppercase tracking-widest border-b border-gray-800 pb-1">Funciones Desbloqueadas</p>
                        
                        <div class="grid grid-cols-2 gap-2 text-[11px]">
                            <div class="p-2 bg-[#111] border border-gray-800 text-gray-400">
                                <span class="text-god-500 font-bold block mb-1">NO-ROOT / ADB</span>
                                • Limpieza Nuclear<br>
                                • DNS Cloudflare<br>
                                • Debloat Extremo<br>
                                • Speed Compile
                            </div>
                            <div class="p-2 bg-[#111] border border-gray-800 text-gray-400">
                                <span class="text-red-500 font-bold block mb-1">ROOT (GOD)</span>
                                • FSTRIM (SSD Fix)<br>
                                • ZRAM Tuning<br>
                                • Swap Kill<br>
                                • FPS Unlock
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="fixed bottom-8 right-8 translate-y-32 opacity-0 transition-all duration-300 z-[60]">
        <div class="glass bg-[#050505] border-l-4 border-l-god-500 border-y border-r border-gray-800 text-white px-5 py-4 shadow-2xl flex items-center gap-4">
            <div class="w-8 h-8 rounded-full bg-god-500/20 flex items-center justify-center text-god-500">
                <i id="toastIcon" class="ph-fill ph-check-circle text-lg"></i>
            </div>
            <div>
                <h4 id="toastTitle" class="font-bold text-sm text-god-400 font-mono uppercase">System</h4>
                <p id="toastMessage" class="text-xs text-gray-500 font-mono">Payload delivered.</p>
            </div>
        </div>
    </div>

    <script>
        // --- TITAN v21 GOD MODE SCRIPT ---
        const bashScript = `#!/bin/bash
# =============================================================================
#   TITAN v21 [GOD MODE]
#   Optimizador de Sistema para Android (Kernel, VM, UI, Network)
# =============================================================================

# Colores y Estilos
R='\\033[0;31m'   # Rojo
G='\\033[0;32m'   # Verde
Y='\\033[1;33m'   # Amarillo (Gold)
B='\\033[0;34m'   # Azul
P='\\033[0;35m'   # Purpura
C='\\033[0;36m'   # Cyan
N='\\033[0m'      # Neutro

clear
echo -e "\${Y}
  TITAN v21 [GOD MODE]
  ====================
\${N}"

# --- 1. DETECCIÓN DE ENTORNO (HACKER STYLE) ---
MODE="LITE"

echo -e "\${C}[*] Escaneando privilegios del sistema...\${N}"
sleep 0.5

# Check Root
if command -v su &> /dev/null; then
    if su -c "id" &> /dev/null; then
        MODE="ROOT"
        echo -e "\${R}[!!!] ACCESO ROOT CONFIRMADO. KERNEL ACCESS GRANTED.\${N}"
    fi
fi

# Check ADB (Fallback)
if [ "$MODE" == "LITE" ]; then
    if command -v adb &> /dev/null; then
        ADB_CHECK=$(adb devices 2>/dev/null | grep "device$")
        if [ ! -z "$ADB_CHECK" ]; then
            MODE="ADB"
            echo -e "\${G}[✓] ACCESO ADB CONFIRMADO. DEBUG BRIDGE ACTIVE.\${N}"
        fi
    fi
fi

if [ "$MODE" == "LITE" ]; then
    echo -e "\${P}[i] Ejecutando en Modo Seguro (Sin Privilegios).\${N}"
fi
sleep 0.5

# Wrapper de Comandos
run_cmd() {
    CMD="$1"
    if [ "$MODE" == "ROOT" ]; then
        su -c "$CMD" >/dev/null 2>&1
    elif [ "$MODE" == "ADB" ]; then
        CLEAN="\${CMD#adb shell }"
        adb shell "$CLEAN" >/dev/null 2>&1
    fi
}

# --- 2. FUNCIONES GOD MODE ---

# >> NET BOOST (DNS Cloudflare + TCP)
net_boost() {
    if [ "$MODE" == "LITE" ]; then echo -e "\${R}[x] Requiere Root/ADB\${N}"; return; fi
    
    echo -e "\n\${Y}[*] Inyectando DNS Cloudflare (1.1.1.1)...\${N}"
    run_cmd "settings put global private_dns_mode hostname"
    run_cmd "settings put global private_dns_specifier 1dot1dot1dot1.cloudflare-dns.com"
    
    if [ "$MODE" == "ROOT" ]; then
        echo -e "\${Y}[*] Optimizando Pila TCP (Root)...\${N}"
        # TCP Tweaks agresivos para baja latencia
        su -c "sysctl -w net.ipv4.tcp_congestion_control=cubic"
        su -c "sysctl -w net.ipv4.tcp_window_scaling=1"
    fi
    echo -e "\${G}[OK] Red Optimizada.\${N}"
}

# >> SPEED COMPILE (Launcher + SystemUI)
speed_compile() {
    if [ "$MODE" == "LITE" ]; then echo -e "\${R}[x] Requiere Root/ADB\${N}"; return; fi
    
    echo -e "\n\${Y}[*] Compilando UI para Velocidad (Speed-Profile)...\${N}"
    echo -e " -> Esto puede tardar 1-2 minutos. No cierres."
    
    # Compilar SystemUI (Barra de estado, notificaciones)
    run_cmd "cmd package compile -m speed com.android.systemui"
    
    # Intentar compilar el launcher por defecto (genérico)
    # Nota: Puede variar según el móvil, intentamos los comunes
    run_cmd "cmd package compile -m speed com.sec.android.app.launcher" # Samsung
    run_cmd "cmd package compile -m speed com.miui.home" # Xiaomi
    run_cmd "cmd package compile -m speed com.google.android.apps.nexuslauncher" # Pixel
    
    echo -e "\${G}[OK] UI Compilada. Reinicia el móvil luego.\${N}"
}

# >> KERNEL INJECTOR (Solo Root)
kernel_inject() {
    if [ "$MODE" != "ROOT" ]; then echo -e "\${R}[x] SOLO ROOT\${N}"; return; fi
    
    echo -e "\n\${R}[*] Inyectando parámetros de Kernel...\${N}"
    
    # ZRAM & Swap (Priorizar RAM real)
    echo -e " -> Ajustando Swappiness a 10 (Menos uso de disco)..."
    su -c "echo 10 > /proc/sys/vm/swappiness"
    
    echo -e " -> Ajustando VFS Cache Pressure a 100..."
    su -c "echo 100 > /proc/sys/vm/vfs_cache_pressure"
    
    # FSTRIM (Crucial para rendimiento sostenido)
    echo -e " -> Ejecutando FSTRIM (Limpieza de bloques SSD)..."
    su -c "fstrim -v /data"
    su -c "fstrim -v /cache"
    su -c "fstrim -v /system"
    
    echo -e "\${G}[OK] Kernel Optimizado.\${N}"
}

# >> FPS UNLOCKER
fps_unlock() {
    if [ "$MODE" == "LITE" ]; then echo -e "\${R}[x] Requiere Root/ADB\${N}"; return; fi
    
    echo -e "\n\${C}[*] Forzando Tasa de Refresco Máxima...\${N}"
    # Intentar forzar 120Hz/Max
    run_cmd "settings put system min_refresh_rate 120.0"
    run_cmd "settings put system peak_refresh_rate 120.0"
    run_cmd "settings put global window_animation_scale 0.5" # 0.5x es el punto dulce
    run_cmd "settings put global transition_animation_scale 0.5"
    run_cmd "settings put global animator_duration_scale 0.5"
    
    echo -e "\${G}[OK] FPS Limit Removed (Intento).\${N}"
}

# >> LIMPIEZA NUCLEAR v2
clean_god() {
    echo -e "\n\${P}[*] Iniciando Protocolo de Limpieza...\${N}"
    
    # Standard cleanup
    find /sdcard -type d -empty -delete 2>/dev/null
    find /sdcard -type f \\( -name "*.log" -o -name "*.tmp" -o -name "*.bak" -o -name "LOST.DIR" \\) -delete 2>/dev/null
    
    # Cache Aggressive (PM Trim)
    if [ "$MODE" != "LITE" ]; then
        echo -e " -> Ejecutando PM TRIM-CACHES..."
        run_cmd "pm trim-caches 999G"
    fi
    
    # Logcat Buffer (Reducir overhead de logs)
    if [ "$MODE" != "LITE" ]; then
        run_cmd "logcat -G 64K"
    fi
    
    echo -e "\${G}[OK] Sistema Limpio.\${N}"
}

# >> MENÚ PRINCIPAL
while true; do
    echo -e "\n----------------------------------------"
    echo -e " PERMISOS: \${Y}$MODE\${N}"
    echo -e "----------------------------------------"
    
    if [ "$MODE" == "ROOT" ]; then
        echo -e " 1. \${R}[GOD]\${N} EJECUTAR TODO (Recomendado)"
        echo -e " 2. Kernel Tuning (Swap/Trim)"
    else
        echo -e " 1. \${Y}[AUTO]\${N} Ejecutar Optimizaciones Disponibles"
    fi
    
    echo -e " 3. Net Boost (DNS Cloudflare)"
    echo -e " 4. Speed Compile (UI Boost)"
    echo -e " 5. Limpieza Nuclear"
    echo -e " 6. Restaurar Valores"
    echo -e " Q. Salir"
    echo -e "----------------------------------------"
    read -p " Select: " opt

    case $opt in
        1) 
           clean_god
           net_boost
           speed_compile
           fps_unlock
           if [ "$MODE" == "ROOT" ]; then kernel_inject; fi
           echo -e "\n\${Y}>> SISTEMA OPTIMIZADO AL MÁXIMO <<\${N}"
           ;;
        2) kernel_inject ;;
        3) net_boost ;;
        4) speed_compile ;;
        5) clean_god ;;
        6) 
           run_cmd "settings put global private_dns_mode off"
           run_cmd "settings put global window_animation_scale 1.0"
           run_cmd "settings put global transition_animation_scale 1.0"
           run_cmd "settings put global animator_duration_scale 1.0"
           echo -e "\${G}Restaurado.\${N}"
           ;;
        q|Q) exit ;;
        *) echo "Inválido" ;;
    esac
    
    echo ""
    read -p "Presiona Enter..."
done
`;

        // --- SYNTAX HIGHLIGHTING ---
        const syntaxRules = [
            { regex: /#.*/g, class: 'syntax-comment' }, 
            { regex: /"(?:[^"\\]|\\.)*"/g, class: 'syntax-string' },
            { regex: /\b(if|then|else|elif|fi|case|esac|for|do|done|while|in|return|exit|function)\b/g, class: 'syntax-keyword' },
            { regex: /\b(echo|read|clear|command|grep|su|adb|find|rm|sleep|sysctl)\b/g, class: 'syntax-function' },
            { regex: /\b(settings put|pm uninstall|pm trim-caches|cmd package|fstrim|logcat)\b/g, class: 'syntax-cmd' },
            { regex: /\$[a-zA-Z0-9_]+/g, class: 'syntax-variable' },
            { regex: /\b\d+(\.\d+)?\b/g, class: 'syntax-string' } 
        ];

        function highlightCode(code) {
            let highlighted = code
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;");
            const placeholders = [];
            const save = (match, cls) => { placeholders.push(`<span class="${cls}">${match}</span>`); return `%%%${placeholders.length - 1}%%%`; };
            syntaxRules.forEach(rule => { highlighted = highlighted.replace(rule.regex, (match) => save(match, rule.class)); });
            highlighted = highlighted.replace(/%%%(\d+)%%%/g, (_, index) => placeholders[index]);
            const lines = highlighted.split('\n');
            document.getElementById('loc').textContent = lines.length;
            return lines.map(line => `<span class="line-number opacity-30 select-none border-r border-god-900 pr-4 mr-4"></span>${line}`).join('\n');
        }

        const codeBlock = document.getElementById('codeBlock');
        codeBlock.innerHTML = highlightCode(bashScript);

        async function copyTextToClipboard(text, successTitle, successMsg) {
            try { await navigator.clipboard.writeText(text); showToast(successTitle, successMsg); } 
            catch (err) { 
                const ta = document.createElement('textarea'); ta.value = text; 
                ta.style.position = 'fixed'; ta.style.opacity = '0'; document.body.appendChild(ta); 
                ta.focus(); ta.select(); document.execCommand('copy'); document.body.removeChild(ta);
                showToast(successTitle, successMsg);
            }
        }

        function copyToClipboard() { copyTextToClipboard(bashScript, 'Copiado', 'Script RAW copiado.'); }
        
        function copyOneLiner() {
            const b64 = btoa(unescape(encodeURIComponent(bashScript)));
            const oneLiner = `pkg update -y >/dev/null 2>&1; pkg install -y android-tools >/dev/null 2>&1; echo "${b64}" | base64 -d > titan_god.sh && chmod +x titan_god.sh && bash titan_god.sh`;
            copyTextToClipboard(oneLiner, 'INYECTOR COPIADO', 'Pega en Termux y ejecuta.');
        }

        const searchInput = document.getElementById('searchInput');
        searchInput.addEventListener('input', (e) => {
            const term = e.target.value.toLowerCase();
            if (term.length < 2) { codeBlock.innerHTML = highlightCode(bashScript); return; }
            const lines = bashScript.split('\n');
            const processedLines = lines.map(line => {
                let htmlLine = line.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
                if (line.toLowerCase().includes(term)) {
                    const regex = new RegExp(`(${term.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, 'gi');
                    htmlLine = htmlLine.replace(regex, '<span class="bg-god-500 text-black font-bold rounded px-1">$1</span>');
                    return `<span class="line-number opacity-50 border-r border-god-900 pr-4 mr-4"></span><span class="bg-god-900/30 block w-full border-l-2 border-god-500 pl-2 text-white">${htmlLine}</span>`;
                }
                return `<span class="line-number opacity-20 border-r border-god-900 pr-4 mr-4"></span><span class="opacity-20 blur-[1px]">${htmlLine}</span>`;
            }).join('\n');
            codeBlock.innerHTML = processedLines;
        });

        const modal = document.getElementById('installModal');
        const body = document.body;
        function toggleModal() { modal.classList.toggle('opacity-0'); modal.classList.toggle('pointer-events-none'); body.classList.toggle('modal-active'); }

        let toastTimeout;
        function showToast(title, msg) {
            const toast = document.getElementById('toast');
            document.getElementById('toastTitle').textContent = title; document.getElementById('toastMessage').textContent = msg;
            toast.classList.remove('translate-y-32', 'opacity-0'); clearTimeout(toastTimeout);
            toastTimeout = setTimeout(() => { toast.classList.add('translate-y-32', 'opacity-0'); }, 3000);
        }
    </script>
</body>
</html>
